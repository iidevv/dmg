{"version":3,"sources":["webpack:///./assets/js/theme/product.js","webpack:///./assets/js/theme/common/models/forms.js","webpack:///./assets/js/theme/common/form-utils.js","webpack:///./assets/js/theme/global/compare-products.js","webpack:///./assets/js/theme/product/reviews.js","webpack:///./assets/js/theme/product/video-gallery.js","webpack:///./assets/js/theme/themevale/themevale_stickyAddToCart.js","webpack:///./assets/js/theme/themevale/themevale_fbt.js"],"names":["Product","context","url","window","location","href","$reviewLink","$","onReady","validator","compareProducts","this","urls","document","on","indexOf","history","replaceState","title","pathname","collapsibleFactory","product_id","val","Countdown","productDetails","ProductDetails","BCData","product_attributes","setProductVariant","videoGallery","$reviewForm","classifyForm","review","Review","registerValidation","performCheck","areAll","productReviewHandler","stickyAddToCart","FBT","length","descriptionSlider","event","slick","descriptionSlider2","trigger","dots","arrows","infinite","slidesToShow","slidesToScroll","mobileFirst","responsive","breakpoint","settings","PageManager","forms","email","value","test","password","notEmpty","inputTagNames","formSelector","options","$form","$inputs","find","join","formFieldClass","each","__","input","specificClassName","$input","$formField","parent","tagName","prop","toLowerCase","className","inputType","addClass","classifyInput","insertStateHiddenField","$stateField","stateFieldAttrs","type","name","$field","fieldId","match","getFieldId","after","Validators","setEmailValidation","field","add","selector","validate","cb","errorMessage","setPasswordValidation","passwordSelector","password2Selector","requirements","isOptional","$password","passwordValidations","result","RegExp","alpha","numeric","minlength","error","setMinMaxPriceValidation","selectors","errorSelector","fieldsetSelector","maxPriceSelector","minPriceSelector","configure","form","preventSubmit","successClass","setMessageOptions","errorSpan","setStateCountryValidation","cleanUpStateValidation","$fieldClassElement","data","Object","keys","nod","classes","forEach","hasClass","removeClass","updateCounterNav","counter","$link","urlContext","is","attr","compare","html","products","$checked","$compareLink","element","compareCounter","item","product","currentTarget","$clickedCompareLink","checked","push","index","splice","decrementCounter","showAlertModal","preventDefault","submit","$reviewsContent","$collapsible","$collapsible2","initLinkBind","injectPaginationLink","collapseReviews","$content","$content2","e","CollapsibleEvents","click","width","animate","scrollTop","offset","top","height","hash","$nextLink","$prevLink","reviewRating","reviewSubject","reviewComment","reviewEmail","VideoGallery","$element","$player","$videos","currentVideo","bindEvents","selectNewVideo","$target","id","$selectedThumb","setMainVideo","setActiveThumb","bind","pluginKey","$el","scroll","css","outerHeight","toggleClass","onload","relate_tab","previewModal","modalFactory","showList","list","response","append","trim","pId","hasOptions","hasDefaultOptions","utils","api","productAttributes","optionChange","serialize","err","attributesData","attributesContent","content","updateProductAttributes","updateView","$scope","productId","purchasable","instock","checkBeforeAdd","slideUp","updateDefaultAttributesForOOS","show","totalPrice","$productOptionsElement","$changedOption","target","parents","undefined","FormData","productAttributesData","productAttributesContent","image","mainImageUrl","tools","getSrc","themeSettings","product_size","showProductImage","productOptionsChanged","productOptions","nextArrow","prevArrow","$attributes","check","focus","att","addToCart","i","arrP","k","cart","itemAdd","formData","key","File","size","delete","console","filterEmptyFilesFromForm","modal","onComplete","tmp","createElement","innerHTML","alert","textContent","innerText","open","hide","cartItemId","template","params","suggest","config","suggestions","limit","getContent","getCartContent","cart_item","updateContent","$body","$cartQuantity","$cartCounter","quantity","total","pos","symbol","currency","text","price","parseFloat","replace","s","toFixed","isNaN","behavior","out_of_stock_behavior","inStockIds","in_stock_attributes","outOfStockMessage","out_of_stock_message","attribute","$attribute","attrId","parseInt","getAttributeType","toggleOption","enableSelectOptionAttribute","enableAttribute","$select","selectedIndex","disableSelectOptionAttribute","disableAttribute","$parent","closest","viewModel","$priceWithTax","$priceWithoutTax","rrpWithTax","$div","$span","rrpWithoutTax","nonSaleWithTax","nonSaleWithoutTax","priceSaved","priceNowLabel","priceLabel","$weight","$increments","$addToCart","$wishlistVariation","stock","$container","$sku","$upc","$text","$bulkPricing","getViewModel","clearPricingNotFound","with_tax","formatted","without_tax","rrp_with_tax","rrp_without_tax","saved","non_sale_price_with_tax","non_sale_price_without_tax","updatePriceView","num","getById","Number","getPage","remove","showFBT","next","slideDown","arrPro","Array","len","checkProduct","swal"],"mappings":"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","file":"theme-bundle.chunk.4.js","sourcesContent":["/*\n Import all product specific js\n */\nimport PageManager from './page-manager';\nimport Review from './product/reviews';\nimport collapsibleFactory from './common/collapsible';\nimport ProductDetails from './common/product-details';\nimport videoGallery from './product/video-gallery';\nimport { classifyForm } from './common/form-utils';\nimport Countdown from './themevale/themevale_Countdown';\nimport stickyAddToCart from './themevale/themevale_stickyAddToCart';\nimport FBT from './themevale/themevale_fbt';\nimport compareProducts from './global/compare-products';\n\nexport default class Product extends PageManager {\n    constructor(context) {\n        super(context);\n        this.url = window.location.href;\n        this.$reviewLink = $('[data-reveal-id=\"modal-review-form\"]');\n    }\n\n    onReady() {\n        compareProducts(this.context.urls);\n        \n        // Listen for foundation modal close events to sanitize URL after review.\n        $(document).on('close.fndtn.reveal', () => {\n            if (this.url.indexOf('#write_review') !== -1 && typeof window.history.replaceState === 'function') {\n                window.history.replaceState(null, document.title, window.location.pathname);\n            }\n        });\n\n        let validator;\n\n        // Init collapsible\n        collapsibleFactory();\n\n        // countdown time\n        var product_id = $('[data-cart-item-add] [name=\"product_id\"]').val();\n        Countdown(product_id);\n\n        this.productDetails = new ProductDetails($('.productView'), this.context, window.BCData.product_attributes);\n        this.productDetails.setProductVariant();\n\n        videoGallery();\n\n        const $reviewForm = classifyForm('.writeReview-form');\n        const review = new Review($reviewForm);\n\n        $('body').on('click', '[data-reveal-id=\"modal-review-form\"]', () => {\n            validator = review.registerValidation(this.context);\n        });\n\n        $reviewForm.on('submit', () => {\n            if (validator) {\n                validator.performCheck();\n                return validator.areAll('valid');\n            }\n\n            return false;\n        });\n\n        this.productReviewHandler();\n        stickyAddToCart();\n        FBT(this.context);\n\n        if ($('.description-slider').length) {\n            this.descriptionSlider();\n            $('[data-collapsible]').on('click', function (event) {\n                $('.description-slider').slick('setPosition');\n            });\n        }\n\n        if ($('.description-slider-2').length) {\n            this.descriptionSlider2();\n            $('[data-collapsible]').on('click', function (event) {\n                $('.description-slider-2').slick('setPosition');\n            });\n        }\n    }\n\n    productReviewHandler() {\n        if (this.url.indexOf('#write_review') !== -1) {\n            this.$reviewLink.trigger('click');\n        }\n    }\n\n    descriptionSlider() {\n        $('.description-slider').slick({\n            dots: true,\n            arrows: false,\n            infinite: false,\n            slidesToShow: 2,\n            slidesToScroll: 2,\n            mobileFirst: true,\n            responsive: [\n            {\n                breakpoint: 551,\n                settings: {\n                    slidesToShow: 3,\n                    slidesToScroll: 3\n                }\n            }]\n        });\n    }\n\n    descriptionSlider2() {\n        $('.description-slider-2').slick({\n            dots: true,\n            arrows: false,\n            infinite: false,\n            slidesToShow: 2,\n            slidesToScroll: 2,\n            mobileFirst: true,\n            responsive: [\n            {\n                breakpoint: 750,\n                settings: {\n                    slidesToShow: 2,\n                    slidesToScroll: 2\n                }\n            },\n            {\n                breakpoint: 551,\n                settings: {\n                    slidesToShow: 3,\n                    slidesToScroll: 3\n                }\n            }]\n        });\n    }\n}\n","const forms = {\n    email(value) {\n        const re = /^.+@.+\\..+/;\n        return re.test(value);\n    },\n\n    /**\n     * Validates a password field\n     * @param value\n     * @returns {boolean}\n     */\n    password(value) {\n        return this.notEmpty(value);\n    },\n\n    /**\n     * validates if a field is empty\n     * @param value\n     * @returns {boolean}\n     *\n     */\n    notEmpty(value) {\n        return value.length > 0;\n    },\n};\n\nexport default forms;\n","import _ from 'lodash';\nimport nod from './nod';\nimport forms from './models/forms';\n\nconst inputTagNames = [\n    'input',\n    'select',\n    'textarea',\n];\n\n/**\n * Apply class name to an input element on its type\n * @param {object} input\n * @param {string} formFieldClass\n * @return {object} Element itself\n */\nfunction classifyInput(input, formFieldClass) {\n    const $input = $(input);\n    const $formField = $input.parent(`.${formFieldClass}`);\n    const tagName = $input.prop('tagName').toLowerCase();\n\n    let className = `${formFieldClass}--${tagName}`;\n    let specificClassName;\n\n    // Input can be text/checkbox/radio etc...\n    if (tagName === 'input') {\n        const inputType = $input.prop('type');\n\n        if (_.includes(['radio', 'checkbox', 'submit'], inputType)) {\n            // ie: .form-field--checkbox, .form-field--radio\n            className = `${formFieldClass}--${_.camelCase(inputType)}`;\n        } else {\n            // ie: .form-field--input .form-field--inputText\n            specificClassName = `${className}${_.capitalize(inputType)}`;\n        }\n    }\n\n    // Apply class modifier\n    return $formField\n        .addClass(className)\n        .addClass(specificClassName);\n}\n\n/**\n * Apply class name to each input element in a form based on its type\n * @example\n * // Before\n * <form id=\"form\">\n *     <div class=\"form-field\">\n *         <input type=\"text\">\n *     </div>\n *     <div class=\"form-field\">\n *         <select>...</select>\n *     </div>\n * </form>\n *\n * classifyForm('#form', { formFieldClass: 'form-field' });\n *\n * // After\n * <div class=\"form-field form-field--input form-field--inputText\">...</div>\n * <div class=\"form-field form-field--select\">...</div>\n *\n * @param {string|object} formSelector - selector or element\n * @param {object} options\n * @return {jQuery} Element itself\n */\nexport function classifyForm(formSelector, options = {}) {\n    const $form = $(formSelector);\n    const $inputs = $form.find(inputTagNames.join(', '));\n\n    // Obtain options\n    const { formFieldClass = 'form-field' } = options;\n\n    // Classify each input in a form\n    $inputs.each((__, input) => {\n        classifyInput(input, formFieldClass);\n    });\n\n    return $form;\n}\n\n/**\n * Get id from given field\n * @param {object} $field JQuery field object\n * @return {string}\n */\nfunction getFieldId($field) {\n    const fieldId = $field.prop('name').match(/(\\[.*\\])/);\n\n    if (fieldId && fieldId.length !== 0) {\n        return fieldId[0];\n    }\n\n    return '';\n}\n\n/**\n * Insert hidden field after State/Province field\n * @param {object} $stateField JQuery field object\n */\nfunction insertStateHiddenField($stateField) {\n    const fieldId = getFieldId($stateField);\n    const stateFieldAttrs = {\n        type: 'hidden',\n        name: `FormFieldIsText${fieldId}`,\n        value: '1',\n    };\n\n    $stateField.after($('<input />', stateFieldAttrs));\n}\n\nconst Validators = {\n    /**\n     * Sets up a new validation when the form is dirty\n     * @param validator\n     * @param field\n     */\n    setEmailValidation: (validator, field) => {\n        if (field) {\n            validator.add({\n                selector: field,\n                validate: (cb, val) => {\n                    const result = forms.email(val);\n\n                    cb(result);\n                },\n                errorMessage: 'You must enter a valid email.',\n            });\n        }\n    },\n\n    /**\n     * Validate password fields\n     * @param validator\n     * @param passwordSelector\n     * @param password2Selector\n     * @param requirements\n     * @param isOptional\n     */\n    setPasswordValidation: (validator, passwordSelector, password2Selector, requirements, isOptional) => {\n        const $password = $(passwordSelector);\n        const passwordValidations = [\n            {\n                selector: passwordSelector,\n                validate: (cb, val) => {\n                    const result = val.length;\n\n                    if (isOptional) {\n                        return cb(true);\n                    }\n\n                    cb(result);\n                },\n                errorMessage: 'You must enter a password.',\n            },\n            {\n                selector: passwordSelector,\n                validate: (cb, val) => {\n                    const result = val.match(new RegExp(requirements.alpha))\n                        && val.match(new RegExp(requirements.numeric))\n                        && val.length >= requirements.minlength;\n\n                    // If optional and nothing entered, it is valid\n                    if (isOptional && val.length === 0) {\n                        return cb(true);\n                    }\n\n                    cb(result);\n                },\n                errorMessage: requirements.error,\n            },\n            {\n                selector: password2Selector,\n                validate: (cb, val) => {\n                    const result = val.length;\n\n                    if (isOptional) {\n                        return cb(true);\n                    }\n\n                    cb(result);\n                },\n                errorMessage: 'You must enter a password.',\n            },\n            {\n                selector: password2Selector,\n                validate: (cb, val) => {\n                    const result = val === $password.val();\n\n                    cb(result);\n                },\n                errorMessage: 'Your passwords do not match.',\n            },\n        ];\n\n        validator.add(passwordValidations);\n    },\n\n    /**\n     * Validate password fields\n     * @param {Nod} validator\n     * @param {Object} selectors\n     * @param {string} selectors.errorSelector\n     * @param {string} selectors.fieldsetSelector\n     * @param {string} selectors.formSelector\n     * @param {string} selectors.maxPriceSelector\n     * @param {string} selectors.minPriceSelector\n     */\n    setMinMaxPriceValidation: (validator, selectors) => {\n        const {\n            errorSelector,\n            fieldsetSelector,\n            formSelector,\n            maxPriceSelector,\n            minPriceSelector,\n        } = selectors;\n\n        validator.configure({\n            form: formSelector,\n            preventSubmit: true,\n            successClass: '_', // KLUDGE: Don't apply success class\n        });\n\n        validator.add({\n            errorMessage: 'Min price must be less than max. price.',\n            selector: minPriceSelector,\n            validate: `min-max:${minPriceSelector}:${maxPriceSelector}`,\n        });\n\n        validator.add({\n            errorMessage: 'Min price must be less than max. price.',\n            selector: maxPriceSelector,\n            validate: `min-max:${minPriceSelector}:${maxPriceSelector}`,\n        });\n\n        validator.add({\n            errorMessage: 'Max. price is required.',\n            selector: maxPriceSelector,\n            validate: 'presence',\n        });\n\n        validator.add({\n            errorMessage: 'Min. price is required.',\n            selector: minPriceSelector,\n            validate: 'presence',\n        });\n\n        validator.add({\n            errorMessage: 'Input must be greater than 0.',\n            selector: [minPriceSelector, maxPriceSelector],\n            validate: 'min-number:0',\n        });\n\n        validator.setMessageOptions({\n            selector: [minPriceSelector, maxPriceSelector],\n            parent: fieldsetSelector,\n            errorSpan: errorSelector,\n        });\n    },\n\n    /**\n     * Sets up a new validation when the form is dirty\n     * @param validator\n     * @param field\n     */\n    setStateCountryValidation: (validator, field) => {\n        if (field) {\n            validator.add({\n                selector: field,\n                validate: 'presence',\n                errorMessage: 'The \\'State/Province\\' field cannot be blank.',\n            });\n        }\n    },\n\n    /**\n     * Removes classes from dirty form if previously checked\n     * @param field\n     */\n    cleanUpStateValidation: (field) => {\n        const $fieldClassElement = $((`[data-type=\"${field.data('fieldType')}\"]`));\n\n        Object.keys(nod.classes).forEach((value) => {\n            if ($fieldClassElement.hasClass(nod.classes[value])) {\n                $fieldClassElement.removeClass(nod.classes[value]);\n            }\n        });\n    },\n};\n\nexport { Validators, insertStateHiddenField };\n","import _ from 'lodash';\nimport { showAlertModal } from './modal';\n\nfunction decrementCounter(counter, item) {\n    const index = counter.indexOf(item);\n\n    if (index > -1) {\n        counter.splice(index, 1);\n    }\n}\n\nfunction incrementCounter(counter, item) {\n    counter.push(item);\n}\n\nfunction updateCounterNav(counter, $link, urlContext) {\n    if (counter.length !== 0) {\n        if (!$link.is('visible')) {\n            $link.addClass('show');\n        }\n        $link.attr('href', `${urlContext.compare}/${counter.join('/')}`);\n        $link.find('span.countPill').html(counter.length);\n    } else {\n        $link.removeClass('show');\n    }\n}\n\nexport default function (urlContext) {\n    let products;\n\n    const $checked = $('body').find('input[name=\"products\\[\\]\"]:checked');\n    const $compareLink = $('a[data-compare-nav]');\n\n    if ($checked.length !== 0) {\n        products = _.map($checked, element => element.value);\n\n        updateCounterNav(products, $compareLink, urlContext);\n    }\n\n    const compareCounter = products || [];\n\n    $('body').on('click', '[data-compare-id]', event => {\n        const product = event.currentTarget.value;\n        const $clickedCompareLink = $('a[data-compare-nav]');\n\n        if (event.currentTarget.checked) {\n            incrementCounter(compareCounter, product);\n        } else {\n            decrementCounter(compareCounter, product);\n        }\n\n        updateCounterNav(compareCounter, $clickedCompareLink, urlContext);\n    });\n\n    $('body').on('submit', '[data-product-compare]', event => {\n        const $this = $(event.currentTarget);\n        const productsToCompare = $this.find('input[name=\"products\\[\\]\"]:checked');\n\n        if (productsToCompare.length <= 1) {\n            showAlertModal('You must select at least two products to compare');\n            event.preventDefault();\n        }\n    });\n\n    $('body').on('click', 'a[data-compare-nav]', () => {\n        const $clickedCheckedInput = $('body').find('input[name=\"products\\[\\]\"]:checked');\n\n        if ($clickedCheckedInput.length <= 1) {\n            showAlertModal('You must select at least two products to compare');\n            return false;\n        }\n    });\n}\n","import nod from '../common/nod';\nimport { CollapsibleEvents } from '../common/collapsible';\nimport forms from '../common/models/forms';\n\nexport default class {\n    constructor($reviewForm) {\n        this.validator = nod({\n            submit: $reviewForm.find('input[type=\"submit\"]'),\n        });\n\n        this.$reviewsContent = $('#product-reviews');\n        this.$collapsible = $('[data-collapsible]', this.$reviewsContent);\n        this.$collapsible2 = $('.productView-reviewTabLink');\n\n        this.initLinkBind();\n        this.injectPaginationLink();\n        this.collapseReviews();\n    }\n\n    /**\n     * On initial page load, the user clicks on \"(12 Reviews)\" link\n     * The browser jumps to the review page and should expand the reviews section\n     */\n    initLinkBind() {\n       const $content = $('#productReviews-content', this.$reviewsContent);\n       const $content2 = $('#product-reviews');\n        $('.review-link a').on('click', (e) => {\n            e.preventDefault();\n            $('.is-open[data-collapsible]', $('.tabs-vertical')).trigger(CollapsibleEvents.click);\n\n            if($('.themevale_productDescription-3').length) {\n                $('.is-open[data-collapsible]', $('.themevale_productDescription-3')).trigger(CollapsibleEvents.click);\n                if ($(window).width() > 1024) {\n                    $('html, body').animate({\n                        scrollTop: $('#tab-review').offset().top - $('.header').height(),\n                    }, 700);\n                } else {\n                    $('html, body').animate({\n                        scrollTop: this.$reviewsContent.offset().top - $('.header').height(),\n                    }, 700);\n                }\n            } else {\n                $('html, body').animate({\n                    scrollTop: this.$reviewsContent.offset().top - $('.header').height(),\n                }, 700);\n            }\n            \n            if (!$content.hasClass('is-open')) {\n                this.$collapsible.trigger(CollapsibleEvents.click);\n            }\n\n            if($('.themevale_productDescription-3').length) {\n                if (!$content2.hasClass('is-active')) {\n                    this.$collapsible2.trigger('click');\n                }\n            }\n        });\n    }\n\n    collapseReviews() {\n        // We're in paginating state, do not collapse\n        if (window.location.hash && window.location.hash.indexOf('#product-reviews') === 0) {\n            return;\n        }\n\n        // force collapse on page load\n        // this.$collapsible2.trigger(CollapsibleEvents.click);\n    }\n\n    /**\n     * Inject ID into the pagination link\n     */\n    injectPaginationLink() {\n        const $nextLink = $('.pagination-item--next .pagination-link', this.$reviewsContent);\n        const $prevLink = $('.pagination-item--previous .pagination-link', this.$reviewsContent);\n\n        if ($nextLink.length) {\n            $nextLink.attr('href', `${$nextLink.attr('href')} #product-reviews`);\n        }\n\n        if ($prevLink.length) {\n            $prevLink.attr('href', `${$prevLink.attr('href')} #product-reviews`);\n        }\n    }\n\n    registerValidation(context) {\n        this.context = context;\n        this.validator.add([{\n            selector: '[name=\"revrating\"]',\n            validate: 'presence',\n            errorMessage: this.context.reviewRating,\n        }, {\n            selector: '[name=\"revtitle\"]',\n            validate: 'presence',\n            errorMessage: this.context.reviewSubject,\n        }, {\n            selector: '[name=\"revtext\"]',\n            validate: 'presence',\n            errorMessage: this.context.reviewComment,\n        }, {\n            selector: '[name=\"email\"]',\n            validate: (cb, val) => {\n                const result = forms.email(val);\n                cb(result);\n            },\n            errorMessage: this.context.reviewEmail,\n        }]);\n\n        return this.validator;\n    }\n\n    validate() {\n        return this.validator.performCheck();\n    }\n}\n","export class VideoGallery {\n    constructor($element) {\n        this.$player = $element.find('[data-video-player]');\n        this.$videos = $element.find('[data-video-item]');\n        this.currentVideo = {};\n        this.bindEvents();\n    }\n\n    selectNewVideo(e) {\n        e.preventDefault();\n\n        const $target = $(e.currentTarget);\n\n        this.currentVideo = {\n            id: $target.data('videoId'),\n            $selectedThumb: $target,\n        };\n\n        this.setMainVideo();\n        this.setActiveThumb();\n    }\n\n    setMainVideo() {\n        this.$player.attr('src', `//www.youtube.com/embed/${this.currentVideo.id}`);\n    }\n\n    setActiveThumb() {\n        this.$videos.removeClass('is-active');\n        this.currentVideo.$selectedThumb.addClass('is-active');\n    }\n\n    bindEvents() {\n        this.$videos.on('click', this.selectNewVideo.bind(this));\n    }\n}\n\nexport default function videoGallery() {\n    const pluginKey = 'video-gallery';\n    const $videoGallery = $(`[data-${pluginKey}]`);\n\n    $videoGallery.each((index, element) => {\n        const $el = $(element);\n        const isInitialized = $el.data(pluginKey) instanceof VideoGallery;\n\n        if (isInitialized) {\n            return;\n        }\n\n        $el.data(pluginKey, new VideoGallery($el));\n    });\n}\n","import $ from 'jquery';\r\nimport utils from '@bigcommerce/stencil-utils';\r\nimport swal from 'sweetalert2';\r\nimport _ from 'lodash';\r\n\r\nexport default function(){\r\n    var scroll = $('#form-action-addToCart').offset();\r\n\r\n    $(window).scroll(function(){\r\n        if($(window).scrollTop() > scroll.top + 100){\r\n            if(!$('#sticky_addtocart').hasClass('show_sticky')){\r\n                $('#sticky_addtocart').addClass('show_sticky');\r\n                if ($(window).width() > 1024) {\r\n                    $('.themevale_popup_left').css(\"bottom\", $('#sticky_addtocart').outerHeight() + 40);\r\n                    $('.themevale_popup_right').css(\"bottom\", $('#sticky_addtocart').outerHeight() + 40);\r\n                } else if ($(window).width() > 550) {\r\n                    $('.themevale_popup_left').css(\"bottom\", $('.themevale_popup_right').outerHeight() + $('#sticky_addtocart').outerHeight() + 30);\r\n                    $('.themevale_popup_right').css(\"bottom\", $('#sticky_addtocart').outerHeight() + 15 );\r\n                } else {\r\n                    $('.themevale_popup_left').css(\"bottom\", $('.themevale_popup_right').outerHeight() + $('#sticky_addtocart').outerHeight());\r\n                    $('.themevale_popup_right').css(\"bottom\", $('#sticky_addtocart').outerHeight());\r\n                }\r\n            }\r\n        } else{\r\n            $('#sticky_addtocart').removeClass('show_sticky');\r\n            $('.pop-up-option').removeClass('is-open');\r\n            $('.choose_options_add').removeClass('is-active');\r\n            if ($(window).width() > 1024) {\r\n                $('.themevale_popup_left').css(\"bottom\", 40);\r\n                $('.themevale_popup_right').css(\"bottom\", 40);\r\n            } else if ($(window).width() > 550) {\r\n                $('.themevale_popup_left').css(\"bottom\", $('.themevale_popup_right').outerHeight() + 30);\r\n                $('.themevale_popup_right').css(\"bottom\", 15);\r\n            } else {\r\n                $('.themevale_popup_left').css(\"bottom\", $('.themevale_popup_right').outerHeight());\r\n                $('.themevale_popup_right').css(\"bottom\", 0);\r\n            }\r\n        }\r\n    });\r\n\r\n    $(document).on('click','.choose_options_add', function(event){\r\n        $(this).toggleClass('is-active');\r\n        $('.pop-up-option').toggleClass('is-open');\r\n    });\r\n\r\n    $(document).on('click','.pop-up-option .close', function(event){\r\n        $(\".pop-up-option\").removeClass('is-open');\r\n        $('.choose_options_add').removeClass('is-active');\r\n    });\r\n\r\n    window.onload = function(){\r\n        if($(window).scrollTop() > scroll.top - 160){\r\n            if(!$('#sticky_addtocart').hasClass('show_sticky')){\r\n                $('#sticky_addtocart').addClass('show_sticky');\r\n                if ($(window).width() > 1024) {\r\n                    $('.themevale_popup_left').css(\"bottom\", $('#sticky_addtocart').outerHeight() + 40);\r\n                    $('.themevale_popup_right').css(\"bottom\", $('#sticky_addtocart').outerHeight() + 40);\r\n                } else if ($(window).width() > 550) {\r\n                    $('.themevale_popup_left').css(\"bottom\", $('.themevale_popup_right').outerHeight() + $('#sticky_addtocart').outerHeight() + 30);\r\n                    $('.themevale_popup_right').css(\"bottom\", $('#sticky_addtocart').outerHeight() + 15 );\r\n                } else {\r\n                    $('.themevale_popup_left').css(\"bottom\", $('.themevale_popup_right').outerHeight() + $('#sticky_addtocart').outerHeight());\r\n                    $('.themevale_popup_right').css(\"bottom\", $('#sticky_addtocart').outerHeight());\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n","import $ from 'jquery';\r\nimport utils from '@bigcommerce/stencil-utils';\r\nimport swal from 'sweetalert2';\r\nimport _ from 'lodash';\r\nimport modalFactory, { showAlertModal } from '../global/modal';\r\n\r\nexport default function(context) {\r\n    const relate_tab = \"#product-related\";\r\n    const previewModal = modalFactory('#previewModal')[0];\r\n\r\n    // check custom field fbt\r\n    showFBT();\r\n\r\n    $(document).on('click', '.themvale-fbt-toggle-options', function() {\r\n        if ($(this).next().is(':visible') == false) {\r\n            $(this).next().slideDown();\r\n        } else {\r\n            $(this).next().slideUp();\r\n        }\r\n    });\r\n\r\n    $(document).on('change', '.themvale-fbt-detail-checkbox', function() {\r\n        var id = $(this).attr('id').replace('fbt_product', '');\r\n        if ($(this).is(':checked') == false) {\r\n            $('.themvale-fbt-product-item[data-product-id=\"' + id + '\"]').removeClass('isChecked');\r\n            $(this).parents('form').find('.themvale-fbt-detail-options').slideUp();\r\n        } else {\r\n            $('.themvale-fbt-product-item[data-product-id=\"' + id + '\"]').addClass('isChecked');\r\n        }\r\n        totalPrice();\r\n    });\r\n\r\n    $(document).on('click', '#themvale-fbt-addAll', function(event) {\r\n        const $form = $('form', $('#themvale-fbt'));\r\n        var arrPro = new Array();\r\n        $('.themvale-fbt-detail-checkbox').each(function(i, val) {\r\n            if ($(val).is(':checked')) {\r\n                arrPro.push(i);\r\n            }\r\n        });\r\n\r\n        var check = false;\r\n\r\n        if (arrPro.length > 0) {\r\n            check = checkProduct($form, arrPro);\r\n        }\r\n\r\n        if (check) {\r\n            if (arrPro.length > 0) {\r\n                $('#themvale-fbt .loadingOverlay').show();\r\n                addToCart($form, 0, arrPro);\r\n            }\r\n        } else {\r\n            swal({\r\n                text: 'Please make sure all options have been filled in.',\r\n                type: 'warning',\r\n            });\r\n        }\r\n\r\n        event.preventDefault();\r\n    });\r\n\r\n    function showFBT() {\r\n        // related product\r\n        const options = {\r\n                template: {\r\n                    item: 'themevale/fbt-item',\r\n                    options: 'themevale/fbt-options',\r\n                },\r\n            };\r\n\r\n        if ($('.productView-info-name.fbt').length > 0) {\r\n            var num = 0;\r\n            var list = [];\r\n\r\n            $(relate_tab + ' .card').each(function(i, val) {\r\n                list.push( {i:i, data: \"\"} );\r\n                var pId = $(val).data('product-id');\r\n                if (pId != undefined) {\r\n                    utils.api.product.getById(pId, options, (err, response) => {\r\n                        if (err) {\r\n                            return '';\r\n                        }\r\n                        list.forEach(function(element) {\r\n                            if(element.i == i){\r\n                                element.data = response;\r\n                            }\r\n                        });\r\n                        \r\n                        num++;\r\n                        if(num == $(relate_tab + ' .card').length)\r\n                            showList(list);\r\n                    });\r\n                }\r\n\r\n            });\r\n        } else if ($('.productView-info-name.fbt-product').length > 0) {\r\n            var num = 0;\r\n            var list = [];\r\n\r\n            $('.productView-info-value.fbt-product').each(function(i) {\r\n                list.push( {i:i, data: \"\"} );\r\n                if (!isNaN(Number($(this).text()))) {\r\n                    var productId = Number($(this).text())\r\n                    utils.api.product.getById(productId, options, (err, response) => {\r\n                        if (err) {\r\n                            return '';\r\n                        }\r\n                        list.forEach(function(element) {\r\n                            if(element.i == i){\r\n                                element.data = response;\r\n                            }\r\n                        });\r\n                        num++;\r\n                        if(num == $('.productView-info-value.fbt-product').length)\r\n                            showList(list);\r\n                    });\r\n                } else {\r\n                    utils.api.getPage($(this).text(), options, (err, response) => {\r\n                        if (err) {\r\n                            return '';\r\n                        }\r\n                        list.forEach(function(element) {\r\n                            if(element.i == i){\r\n                                element.data = response;\r\n                            }\r\n                        });\r\n                        num++;\r\n                        if(num == $('.productView-info-value.fbt-product').length)\r\n                            showList(list);\r\n                    });\r\n                }\r\n            });\r\n        } else {\r\n            $('#themvale-fbt').remove();\r\n        }\r\n    }\r\n\r\n    function showList(list){\r\n        list.forEach(function(element) {\r\n            var response = element.data;\r\n            $('#themvale-fbt .themvale-fbt-product-list').append(response.item);\r\n            if (response.options.trim() != \"\") {\r\n                var pId = $(response.item).data('product-id');\r\n                const $form = $('#themvale-fbt .themvale-fbt-product-list .themvale-fbt-product-item[data-product-id=\"' + pId + '\"] form');\r\n                $form.append(response.options);\r\n                const $productOptionsElement = $('[data-fbt-option-change]', $form);\r\n                const hasOptions = $productOptionsElement.html().trim().length;\r\n                const hasDefaultOptions = $(response.options).find('[data-default]').length;\r\n                if ( hasDefaultOptions && hasOptions) {\r\n                    utils.api.productAttributes.optionChange(pId, $form.serialize(), 'products/bulk-discount-rates', (err, response) => {\r\n                        const attributesData = response.data || {};\r\n                        const attributesContent = response.content || {};\r\n                        updateProductAttributes($form, attributesData);\r\n                        if (hasDefaultOptions) {\r\n                            updateView($form, attributesData, attributesContent);\r\n                        } else {\r\n                            updateDefaultAttributesForOOS(attributesData);\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        });\r\n        $('#themvale-fbt').show();\r\n        productOptions();\r\n        $('#themvale-fbt .themvale-fbt-product-wrapper').append('<div class=\"themvale-fbt-total fbt__total\">\\\r\n          <p class=\"themevale-text-price\"><span>Total:</span> <span class=\"themvale-fbt-total-price\" id=\"themvale-fbt-totalPrice\"></span></p>\\\r\n          <a class=\"button button--primary themvale-fbt-total-button\" id=\"themvale-fbt-addAll\" href=\"#\">Add all to Cart</a>\\\r\n        </div>');\r\n        slick_slider();\r\n        totalPrice();\r\n    }\r\n\r\n    function slick_slider() {\r\n        if ($('.product-layout-3').length) {\r\n            $('.themvale-fbt-product-list').slick({\r\n                dots: true,\r\n                arrows: false,\r\n                slidesToShow: 2,\r\n                slidesToScroll: 2,\r\n                mobileFirst: true,\r\n                infinite: false,\r\n                nextArrow: \"<svg class='slick-next slick-arrow'><use xlink:href='#icon-slick-next'></use></svg>\",\r\n                prevArrow: \"<svg class='slick-prev slick-arrow'><use xlink:href='#icon-slick-prev'></use></svg>\",\r\n                responsive: [\r\n                    {\r\n                        breakpoint: 1025,\r\n                        settings: {\r\n                            slidesToScroll: 3,\r\n                            slidesToShow: 3,\r\n                            dots: false,\r\n                            arrows: true\r\n                        }\r\n                    },\r\n                    {\r\n                        breakpoint: 992,\r\n                        settings: {\r\n                            slidesToScroll: 4,\r\n                            slidesToShow: 4\r\n                        }\r\n                    },\r\n                    {\r\n                        breakpoint: 551,\r\n                        settings: {\r\n                            slidesToScroll: 3,\r\n                            slidesToShow: 3\r\n                        }\r\n                    }\r\n                ]\r\n            });\r\n        } else {\r\n            $('.themvale-fbt-product-list').slick({\r\n                dots: true,\r\n                arrows: false,\r\n                slidesToShow: 2,\r\n                slidesToScroll: 2,\r\n                mobileFirst: true,\r\n                infinite: false,\r\n                nextArrow: \"<svg class='slick-next slick-arrow'><use xlink:href='#icon-slick-next'></use></svg>\",\r\n                prevArrow: \"<svg class='slick-prev slick-arrow'><use xlink:href='#icon-slick-prev'></use></svg>\",\r\n                responsive: [\r\n                    {\r\n                        breakpoint: 1025,\r\n                        settings: {\r\n                            slidesToScroll: 4,\r\n                            slidesToShow: 4,\r\n                            dots: false,\r\n                            arrows: true\r\n                        }\r\n                    },\r\n                    {\r\n                        breakpoint: 992,\r\n                        settings: {\r\n                            slidesToScroll: 4,\r\n                            slidesToShow: 4\r\n                        }\r\n                    },\r\n                    {\r\n                        breakpoint: 551,\r\n                        settings: {\r\n                            slidesToScroll: 3,\r\n                            slidesToShow: 3\r\n                        }\r\n                    }\r\n                ]\r\n            });\r\n            \r\n        }\r\n    }\r\n\r\n    function checkProduct(form, arrPro) {\r\n        var check = true;\r\n\r\n        for (var i = 0, len = arrPro.length; i < len; i++) {\r\n            var k = arrPro[i];\r\n            var $form = $(form[k]);\r\n            if ($form.find('[data-fbt-option-change]').length) {\r\n                check = checkBeforeAdd($form);\r\n                if (check == false)\r\n                    return false;\r\n            }\r\n        }\r\n        return check;\r\n    }\r\n\r\n    function checkBeforeAdd($attributes) {\r\n        var check = true;\r\n        $attributes.find('input:text, input:password, input:file, textarea').each(function() {\r\n\r\n            if (!$(this).prop('required')) {} else {\r\n                if ($(this).val()) {} else {\r\n                    $(this).focus();\r\n                    check = false;\r\n                }\r\n            }\r\n        });\r\n\r\n        $attributes.find('select').each(function() {\r\n\r\n            if (!$(this).prop('required')) {\r\n\r\n            } else {\r\n                if ($(this).val()) {} else {\r\n                    $(this).focus();\r\n                    check = false;\r\n                }\r\n            }\r\n        });\r\n\r\n        var att = \"\";\r\n        $attributes.find('input:radio, input:checkbox').each(function() {\r\n            if (att != $(this).attr(\"name\")) {\r\n\r\n                att = $(this).attr(\"name\");\r\n                if (!$(this).prop('required')) {\r\n                    if ($(this).attr(\"type\") == \"checkbox\") {\r\n                        if ($(\"[name='\" + att + \"']:checked\").val()) {}\r\n                    }\r\n                    if ($(this).attr(\"type\") == \"radio\") {\r\n                        if ($(\"[name='\" + att + \"']:checked\").val()) {}\r\n                    }\r\n                } else {\r\n                    if ($(this).attr(\"type\") == \"checkbox\") {\r\n                        if ($(\"[name='\" + att + \"']:checked\").val()) {} else {\r\n                            check = false;\r\n                        }\r\n                    }\r\n                    if ($(this).attr(\"type\") == \"radio\") {\r\n                        if ($(\"[name='\" + att + \"']:checked\").val()) {} else {\r\n                            check = false;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n        return check;\r\n    }\r\n\r\n    function addToCart(form, i, arrP) {\r\n\r\n        if (i >= arrP.length) {\r\n            window.location = '/cart.php';\r\n            return;\r\n        }\r\n\r\n        if (window.FormData === undefined) {\r\n            return;\r\n        }\r\n        var k = arrP[i];\r\n        // Add item to cart\r\n        utils.api.cart.itemAdd(filterEmptyFilesFromForm(new FormData(form[k])), (err, response) => {\r\n            const errorMessage = err || response.data.error;\r\n\r\n            // Guard statement\r\n            if (errorMessage) {\r\n                // Strip the HTML from the error message\r\n                const tmp = document.createElement('DIV');\r\n                tmp.innerHTML = errorMessage;\r\n                alert(tmp.textContent || tmp.innerText);\r\n            }\r\n            i++;\r\n            if (i >= arrP.length) {\r\n                // window.location = '/cart.php';\r\n                if (previewModal) {\r\n                    previewModal.open();    \r\n                    $('#themvale-fbt .loadingOverlay').hide();\r\n                    updateCartContent(previewModal, response.data.cart_item.id);\r\n                } else {\r\n                    // if no modal, redirect to the cart page\r\n                    window.location = '/cart.php';\r\n                }\r\n                return;\r\n            }\r\n            addToCart(form, i, arrP);\r\n            // return response.data.cart_item.product_id;\r\n        });\r\n    }\r\n    function updateCartContent(modal, cartItemId, onComplete) {\r\n        getCartContent(cartItemId, (err, response) => {\r\n            if (err) {\r\n                return;\r\n            }\r\n\r\n            modal.updateContent(response);\r\n\r\n            // Update cart counter\r\n            const $body = $('body');\r\n            const $cartQuantity = $('[data-cart-quantity]', modal.$content);\r\n            const $cartCounter = $('.navUser-action .cart-count');\r\n            const quantity = $cartQuantity.data('cartQuantity') || 0;\r\n\r\n            $cartCounter.addClass('cart-count--positive');\r\n            $body.trigger('cart-quantity-update', quantity);\r\n\r\n            if (onComplete) {\r\n                onComplete(response);\r\n            }\r\n        });\r\n    }\r\n\r\n    function getCartContent(cartItemId, onComplete) {\r\n        const options = {\r\n            template: 'cart/preview',\r\n            params: {\r\n                suggest: cartItemId,\r\n            },\r\n            config: {\r\n                cart: {\r\n                    suggestions: {\r\n                        limit: 4,\r\n                    },\r\n                },\r\n            },\r\n        };\r\n\r\n        utils.api.cart.getContent(options, onComplete);\r\n    }\r\n\r\n    function totalPrice() {\r\n        var total = 0;\r\n        var pos = 0;\r\n        var symbol = \"$\";\r\n        $('.themvale-fbt-product-item.isChecked').each(function(i, val) {\r\n            if ($(val).find('.price-section .price.price--withTax').length)\r\n                var currency = $(val).find('.price-section .price.price--withTax').text();\r\n            else\r\n                var currency = $(val).find('.price-section .price.price--withoutTax').text();\r\n            var price = parseFloat(currency.replace(/[^0-9.-]+/g, \"\"));\r\n            var s = currency.replace(parseFloat(price).toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\"), \"\");\r\n            if (isNaN(parseFloat(s.replace(/[^0-9.-]+/g, \"\"))))\r\n                symbol = s;\r\n            if (currency.indexOf(symbol) != -1)\r\n                pos = currency.indexOf(symbol);\r\n            total = total + price;\r\n        });\r\n        total = parseFloat(total).toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n        if (pos == 0)\r\n            total = symbol + total;\r\n        else\r\n            total = total + symbol;\r\n        $('#themvale-fbt-totalPrice').html(total);\r\n    }\r\n\r\n    function productOptions() {\r\n        totalPrice();\r\n        const $form = $('form', $(document));\r\n\r\n        // var arrPro = new Array();\r\n        // for (var i = 0, len = $form.length; i < len; i++) {\r\n            const $productOptionsElement = $('[data-fbt-option-change]', $form);\r\n            $(document).on('change', $productOptionsElement, event => {\r\n                productOptionsChanged(event);\r\n            });\r\n        // }\r\n\r\n        $(document).on('click', '.close-options', function() {\r\n            $(this).parent().slideUp();\r\n        });\r\n    }\r\n\r\n    function productOptionsChanged(event) {\r\n        const $changedOption = $(event.target);\r\n        const $form = $changedOption.parents('form');\r\n        const productId = $('[name=\"product_id\"]', $form).val();\r\n        // Do not trigger an ajax request if it's a file or if the browser doesn't support FormData\r\n        if ($changedOption.attr('type') === 'file' || window.FormData === undefined) {\r\n            return;\r\n        }\r\n        if ($changedOption.attr('id') === 'fbt_product' + productId) {\r\n            return;\r\n        }\r\n        \r\n        utils.api.productAttributes.optionChange(productId, $form.serialize(), 'products/bulk-discount-rates', (err, response) => {\r\n            const productAttributesData = response.data || {};\r\n            const productAttributesContent = response.content || {};\r\n            showProductImage(productId, productAttributesData);\r\n            updateProductAttributes($form, productAttributesData);\r\n            updateView($form, productAttributesData, productAttributesContent);\r\n            totalPrice();\r\n        });\r\n        return false;\r\n    }\r\n    \r\n    function updateProductAttributes($scope, data) {\r\n        const behavior = data.out_of_stock_behavior;\r\n        const inStockIds = data.in_stock_attributes;\r\n        const outOfStockMessage = ` (${data.out_of_stock_message})`;\r\n\r\n        if (behavior !== 'hide_option' && behavior !== 'label_option') {\r\n            return;\r\n        }\r\n\r\n        $('[data-product-attribute-value]', $scope).each((i, attribute) => {\r\n            const $attribute = $(attribute);\r\n            const attrId = parseInt($attribute.data('productAttributeValue'), 10);\r\n\r\n\r\n            if (inStockIds.indexOf(attrId) !== -1) {\r\n                enableAttribute($attribute, behavior, outOfStockMessage);\r\n            } else {\r\n                disableAttribute($attribute, behavior, outOfStockMessage);\r\n            }\r\n        });\r\n    }\r\n\r\n    function disableAttribute($attribute, behavior, outOfStockMessage) {\r\n        if (getAttributeType($attribute) === 'set-select') {\r\n            return disableSelectOptionAttribute($attribute, behavior, outOfStockMessage);\r\n        }\r\n\r\n        if (behavior === 'hide_option') {\r\n            $attribute.hide();\r\n        } else {\r\n            $attribute.addClass('unavailable');\r\n        }\r\n    }\r\n\r\n    function disableSelectOptionAttribute($attribute, behavior, outOfStockMessage) {\r\n        const $select = $attribute.parent();\r\n\r\n        if (behavior === 'hide_option') {\r\n            $attribute.toggleOption(false);\r\n            // If the attribute is the selected option in a select dropdown, select the first option (MERC-639)\r\n            if ($select.val() === $attribute.attr('value')) {\r\n                $select[0].selectedIndex = 0;\r\n            }\r\n        } else {\r\n            $attribute.attr('disabled', 'disabled');\r\n            $attribute.html($attribute.html().replace(outOfStockMessage, '') + outOfStockMessage);\r\n        }\r\n    }\r\n\r\n    function enableAttribute($attribute, behavior, outOfStockMessage) {\r\n        if (getAttributeType($attribute) === 'set-select') {\r\n            return enableSelectOptionAttribute($attribute, behavior, outOfStockMessage);\r\n        }\r\n\r\n        if (behavior === 'hide_option') {\r\n            $attribute.show();\r\n        } else {\r\n            $attribute.removeClass('unavailable');\r\n        }\r\n    }\r\n\r\n    function enableSelectOptionAttribute($attribute, behavior, outOfStockMessage) {\r\n        if (behavior === 'hide_option') {\r\n            $attribute.toggleOption(true);\r\n        } else {\r\n            $attribute.prop('disabled', false);\r\n            $attribute.html($attribute.html().replace(outOfStockMessage, ''));\r\n        }\r\n    }\r\n\r\n    function getAttributeType($attribute) {\r\n        const $parent = $attribute.closest('[data-product-attribute]');\r\n\r\n        return $parent ? $parent.data('productAttribute') : null;\r\n    }\r\n\r\n    function showProductImage(productId, data) {\r\n        if (_.isPlainObject(data.image)) {\r\n\r\n            const mainImageUrl = utils.tools.image.getSrc(\r\n                data.image.data,\r\n                context.themeSettings.product_size,\r\n            );\r\n\r\n            $('.themvale-fbt-product-item[data-product-id=\"' + productId + '\"]').find('img').attr({\r\n                'src': mainImageUrl,\r\n                'data-src': $(this).attr('src'),\r\n            });\r\n\r\n        } else {\r\n            const mainImageUrl = $('.themvale-fbt-product-item[data-product-id=\"' + productId + '\"]').find('img').attr('data-src');\r\n            $('.themvale-fbt-product-item[data-product-id=\"' + productId + '\"]').find('img').attr({\r\n                'src': mainImageUrl,\r\n                'data-src': $(this).attr('src'),\r\n            });\r\n        }\r\n    }\r\n\r\n    function updateView($scope, data, content = null) {\r\n        const viewModel = getViewModel($scope);\r\n\r\n        if (_.isObject(data.price)) {\r\n            updatePriceView(viewModel, data.price);\r\n        }\r\n        var productId = $('[name=\"product_id\"]', $scope).val();\r\n\r\n        if (!data.purchasable || !data.instock) {\r\n            $('.themvale-fbt-product-item[data-product-id=\"' + productId + '\"]').removeClass('isChecked');\r\n            $('#fbt_product' + productId).prop('checked', false).prop('disabled', true);\r\n            $('.themvale-fbt-product-item[data-product-id=\"' + productId + '\"]').removeClass('hasOptions--selected');\r\n        } else {\r\n            $('.themvale-fbt-product-item[data-product-id=\"' + productId + '\"]').addClass('isChecked');\r\n            $('#fbt_product' + productId).prop('checked', true).prop('disabled', false);\r\n\r\n            if ($scope.find('[data-fbt-option-change]').length) {\r\n                var check = checkBeforeAdd($scope);\r\n                if (check == true) {\r\n                    $('.themvale-fbt-product-item[data-product-id=\"' + productId + '\"]').addClass('hasOptions--selected');\r\n                    $('[data-fbt-option-change]', $scope).slideUp();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    function updateDefaultAttributesForOOS($scope, data) {\r\n        var productId = $('[name=\"product_id\"]', $scope).val();\r\n\r\n        if (!data.purchasable || !data.instock) {\r\n            $('.themvale-fbt-product-item[data-product-id=\"' + productId + '\"]').removeClass('isChecked');\r\n            $('#fbt_product' + productId).prop('checked', false).prop('disabled', true);\r\n            $('.themvale-fbt-product-item[data-product-id=\"' + productId + '\"]').removeClass('hasOptions--selected');\r\n        } else {\r\n            $('.themvale-fbt-product-item[data-product-id=\"' + productId + '\"]').addClass('isChecked');\r\n            $('#fbt_product' + productId).prop('checked', true).prop('disabled', false);\r\n\r\n            if ($scope.find('[data-fbt-option-change]').length) {\r\n                var check = checkBeforeAdd($scope);\r\n                if (check == true) {\r\n                    $('.themvale-fbt-product-item[data-product-id=\"' + productId + '\"]').addClass('hasOptions--selected');\r\n                    $('[data-fbt-option-change]', $scope).slideUp();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    function getViewModel($scope) {\r\n        return {\r\n            $priceWithTax: $('[data-product-price-with-tax]', $scope),\r\n            $priceWithoutTax: $('[data-product-price-without-tax]', $scope),\r\n            rrpWithTax: {\r\n                $div: $('.rrp-price--withTax', $scope),\r\n                $span: $('[data-product-rrp-with-tax]', $scope),\r\n            },\r\n            rrpWithoutTax: {\r\n                $div: $('.rrp-price--withoutTax', $scope),\r\n                $span: $('[data-product-rrp-price-without-tax]', $scope),\r\n            },\r\n            nonSaleWithTax: {\r\n                $div: $('.non-sale-price--withTax', $scope),\r\n                $span: $('[data-product-non-sale-price-with-tax]', $scope),\r\n            },\r\n            nonSaleWithoutTax: {\r\n                $div: $('.non-sale-price--withoutTax', $scope),\r\n                $span: $('[data-product-non-sale-price-without-tax]', $scope),\r\n            },\r\n            priceSaved: {\r\n                $div: $('.price-section--saving', $scope),\r\n                $span: $('[data-product-price-saved]', $scope),\r\n            },\r\n            priceNowLabel: {\r\n                $span: $('.price-now-label', $scope),\r\n            },\r\n            priceLabel: {\r\n                $span: $('.price-label', $scope),\r\n            },\r\n            $weight: $('.productView-info [data-product-weight]', $scope),\r\n            $increments: $('.form-field--increments :input', $scope),\r\n            $addToCart: $('#form-action-addToCart', $scope),\r\n            $wishlistVariation: $('[data-wishlist-add] [name=\"variation_id\"]', $scope),\r\n            stock: {\r\n                $container: $('.form-field--stock', $scope),\r\n                $input: $('[data-product-stock]', $scope),\r\n            },\r\n            $sku: $('[data-product-sku]'),\r\n            $upc: $('[data-product-upc]'),\r\n            quantity: {\r\n                $text: $('.incrementTotal', $scope),\r\n                $input: $('[name=qty\\\\[\\\\]]', $scope),\r\n            },\r\n            $bulkPricing: $('.productView-info-bulkPricing', $scope),\r\n        };\r\n    }\r\n\r\n    function clearPricingNotFound(viewModel) {\r\n        viewModel.rrpWithTax.$div.hide();\r\n        viewModel.rrpWithoutTax.$div.hide();\r\n        viewModel.nonSaleWithTax.$div.hide();\r\n        viewModel.nonSaleWithoutTax.$div.hide();\r\n        viewModel.priceSaved.$div.hide();\r\n        viewModel.priceNowLabel.$span.hide();\r\n        viewModel.priceLabel.$span.hide();\r\n    }\r\n    /**\r\n     * Update the view of price, messages, SKU and stock options when a product option changes\r\n     * @param  {Object} data Product attribute data\r\n     */\r\n    function updatePriceView(viewModel, price) {\r\n        clearPricingNotFound(viewModel);\r\n\r\n        if (price.with_tax) {\r\n            viewModel.priceLabel.$span.show();\r\n            viewModel.$priceWithTax.html(price.with_tax.formatted);\r\n        }\r\n\r\n        if (price.without_tax) {\r\n            viewModel.priceLabel.$span.show();\r\n            viewModel.$priceWithoutTax.html(price.without_tax.formatted);\r\n        }\r\n\r\n        if (price.rrp_with_tax) {\r\n            viewModel.rrpWithTax.$div.show();\r\n            viewModel.rrpWithTax.$span.html(price.rrp_with_tax.formatted);\r\n        }\r\n\r\n        if (price.rrp_without_tax) {\r\n            viewModel.rrpWithoutTax.$div.show();\r\n            viewModel.rrpWithoutTax.$span.html(price.rrp_without_tax.formatted);\r\n        }\r\n\r\n        if (price.saved) {\r\n            viewModel.priceSaved.$div.show();\r\n            viewModel.priceSaved.$span.html(price.saved.formatted);\r\n        }\r\n\r\n        if (price.non_sale_price_with_tax) {\r\n            viewModel.priceLabel.$span.hide();\r\n            viewModel.nonSaleWithTax.$div.show();\r\n            viewModel.priceNowLabel.$span.show();\r\n            viewModel.nonSaleWithTax.$span.html(price.non_sale_price_with_tax.formatted);\r\n        }\r\n\r\n        if (price.non_sale_price_without_tax) {\r\n            viewModel.priceLabel.$span.hide();\r\n            viewModel.nonSaleWithoutTax.$div.show();\r\n            viewModel.priceNowLabel.$span.show();\r\n            viewModel.nonSaleWithoutTax.$span.html(price.non_sale_price_without_tax.formatted);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * https://stackoverflow.com/questions/49672992/ajax-request-fails-when-sending-formdata-including-empty-file-input-in-safari\r\n     * Safari browser with jquery 3.3.1 has an issue uploading empty file parameters. This function removes any empty files from the form params\r\n     * @param formData: FormData object\r\n     * @returns FormData object\r\n     */\r\n    function filterEmptyFilesFromForm(formData) {\r\n        try {\r\n            for (const [key, val] of formData) {\r\n                if (val instanceof File && !val.name && !val.size) {\r\n                    formData.delete(key);\r\n                }\r\n            }\r\n        } catch (e) {\r\n            console.error(e); // eslint-disable-line no-console\r\n        }\r\n        return formData;\r\n    }\r\n\r\n}\r\n"],"sourceRoot":""}